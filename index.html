<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’• Will You Be My Valentine? ğŸ’•</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep:       #0a0005;
            --bg-mid:        #160010;
            --card-bg:       rgba(20, 0, 15, 0.93);
            --card-border:   rgba(180, 20, 60, 0.35);
            --red-vivid:     #c8102e;
            --red-glow:      #ff2d55;
            --rose-light:    #ff6b8a;
            --white:         #fff8f9;
            --text-muted:    rgba(255,248,249,0.55);
            --choice-bg:     rgba(200, 16, 46, 0.12);
            --choice-hover:  rgba(200, 16, 46, 0.28);
            --choice-sel:    rgba(200, 16, 46, 0.45);
            --choice-border: rgba(200, 16, 46, 0.4);
            --gold:          #ffd700;
        }

        * { margin:0; padding:0; box-sizing:border-box; }

        body {
            font-family: 'Lato', sans-serif;
            background: radial-gradient(ellipse at 30% 20%, #2a0018 0%, var(--bg-mid) 40%, var(--bg-deep) 100%);
            min-height: 100vh;
            display: flex; justify-content: center; align-items: center;
            overflow-x: hidden; position: relative;
        }
        body::before {
            content: ''; position: fixed; inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
            pointer-events: none; z-index: 0; opacity: 0.4;
        }

        /* â”€â”€ Roses background â”€â”€ */
        .roses-bg { position: fixed; inset: 0; pointer-events: none; overflow: hidden; z-index: 0; }
        .rose {
            position: absolute; opacity: 0;
            animation: roseFloat linear infinite;
            filter: drop-shadow(0 0 6px rgba(200,16,46,0.5));
        }
        @keyframes roseFloat {
            0%   { transform: translateY(110vh) rotate(0deg) scale(0.8);   opacity: 0; }
            8%   { opacity: 0.75; }
            92%  { opacity: 0.75; }
            100% { transform: translateY(-120px) rotate(380deg) scale(1.1); opacity: 0; }
        }

        /* â”€â”€ Card â”€â”€ */
        .card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            padding: 44px 40px; border-radius: 24px;
            box-shadow: 0 0 60px rgba(200,16,46,0.18), 0 24px 80px rgba(0,0,0,0.7), inset 0 1px 0 rgba(255,255,255,0.06);
            text-align: center; max-width: 540px; width: 90%;
            position: relative; z-index: 1;
            animation: cardIn 0.7s cubic-bezier(.22,1,.36,1) both;
            backdrop-filter: blur(18px);
            transition: opacity 0.25s ease, transform 0.25s ease, box-shadow 0.4s ease;
        }
        @keyframes cardIn {
            from { opacity:0; transform: translateY(30px) scale(0.97); }
            to   { opacity:1; transform: translateY(0) scale(1); }
        }
        @keyframes shake {
            0%,100% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            60% { transform: translateX(10px); }
            80% { transform: translateX(-6px); }
        }

        /* â”€â”€ Live score badge â”€â”€ */
        .score-badge {
            position: absolute; top: 16px; right: 20px;
            font-family: 'Playfair Display', serif;
            font-size: 13px; color: var(--gold);
            letter-spacing: 1px; opacity: 0.85;
        }

        /* â”€â”€ Progress bar â”€â”€ */
        .progress-bar {
            width: 100%; height: 5px;
            background: rgba(255,255,255,0.08);
            border-radius: 10px; margin-bottom: 28px; overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--red-vivid), var(--red-glow));
            border-radius: 10px; transition: width 0.6s ease;
            box-shadow: 0 0 10px var(--red-glow);
        }

        /* â”€â”€ Try pips â”€â”€ */
        .tries-row { display: flex; justify-content: center; gap: 8px; margin-bottom: 16px; }
        .try-pip {
            width: 10px; height: 10px; border-radius: 50%;
            background: rgba(255,45,85,0.25);
            border: 1px solid rgba(255,45,85,0.5); transition: all 0.3s;
        }
        .try-pip.used { background: var(--red-glow); box-shadow: 0 0 8px var(--red-glow); }

        /* â”€â”€ Typography â”€â”€ */
        .q-number { color: var(--text-muted); font-size: 12px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 14px; }
        .q-title  { font-family: 'Playfair Display', serif; color: var(--rose-light); font-size: 14px; letter-spacing: 1.5px; text-transform: uppercase; margin-bottom: 18px; font-weight: 400; }
        .q-text   { font-family: 'Playfair Display', serif; font-size: 19px; color: var(--white); margin-bottom: 24px; line-height: 1.65; font-style: italic; }

        /* â”€â”€ Choices â”€â”€ */
        .choices { display: flex; flex-direction: column; gap: 10px; margin-bottom: 8px; }
        .choice-btn {
            background: var(--choice-bg); border: 1px solid var(--choice-border);
            color: var(--white); padding: 13px 18px; border-radius: 12px;
            cursor: pointer; font-size: 15px; font-family: 'Lato', sans-serif;
            transition: all 0.2s ease; text-align: left; position: relative; overflow: hidden;
        }
        .choice-btn::before { content: ''; position: absolute; left: 0; top: 0; width: 3px; height: 100%; background: var(--red-glow); opacity: 0; transition: opacity 0.2s; }
        .choice-btn:hover { background: var(--choice-hover); border-color: var(--red-glow); transform: translateX(4px); }
        .choice-btn:hover::before { opacity: 1; }
        .choice-btn.selected { background: var(--choice-sel); border-color: var(--red-glow); color:#fff; box-shadow: 0 0 14px rgba(255,45,85,0.25); }
        .choice-btn.selected::before { opacity: 1; }
        .choice-btn.wrong { border-color: #ff2d55 !important; background: rgba(255,45,85,0.2) !important; animation: shake 0.35s ease; }
        .choice-btn.correct-reveal { border-color: #25a050 !important; background: rgba(37,160,80,0.25) !important; color: #a7f3d0 !important; }
        .choice-btn:disabled { cursor: default; pointer-events: none; opacity: 0.5; }

        /* â”€â”€ Buttons â”€â”€ */
        .next-btn {
            background: linear-gradient(135deg, var(--red-vivid) 0%, #e8173a 100%);
            color: white; border: none; padding: 14px 44px; border-radius: 12px;
            cursor: pointer; font-size: 15px; font-family: 'Lato', sans-serif;
            font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase;
            margin-top: 22px; transition: all 0.25s; box-shadow: 0 4px 20px rgba(200,16,46,0.45);
        }
        .next-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(255,45,85,0.5); }
        .next-btn:active { transform: translateY(0); }
        .next-btn:disabled { opacity: 0.35; cursor: default; pointer-events: none; }

        /* â”€â”€ Error/feedback â”€â”€ */
        .error-msg { font-size: 13px; margin-top: 12px; opacity: 0; transition: opacity 0.3s; letter-spacing: 0.4px; min-height: 20px; }
        .error-msg.show { opacity: 1; }
        .error-msg.red  { color: var(--red-glow); }
        .error-msg.gold { color: var(--gold); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INTRO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #intro-section { animation: cardIn 0.7s ease both; }
        .intro-heart { font-size: 52px; animation: heartBeat 1.4s ease-in-out infinite; display: block; margin-bottom: 20px; }
        @keyframes heartBeat {
            0%,100% { transform: scale(1); }
            14% { transform: scale(1.18); }
            28% { transform: scale(1); }
            42% { transform: scale(1.12); }
            70% { transform: scale(1); }
        }
        .intro-title { font-family: 'Playfair Display', serif; font-size: 26px; color: var(--white); margin-bottom: 14px; line-height: 1.4; }
        .intro-subtitle { font-size: 15px; color: var(--text-muted); line-height: 1.7; margin-bottom: 10px; font-style: italic; }
        .intro-note {
            font-size: 13px; color: rgba(255,215,0,0.75); margin: 18px 0 28px;
            letter-spacing: 0.3px; border: 1px solid rgba(255,215,0,0.2);
            border-radius: 10px; padding: 12px 16px; background: rgba(255,215,0,0.05);
        }
        .start-btn {
            background: linear-gradient(135deg, var(--red-vivid), #e8173a);
            color: white; border: none; padding: 16px 52px; border-radius: 12px;
            cursor: pointer; font-size: 17px; font-family: 'Playfair Display', serif;
            font-style: italic; letter-spacing: 0.5px; transition: all 0.25s;
            box-shadow: 0 4px 24px rgba(200,16,46,0.5);
            animation: startPulse 2s ease-in-out infinite;
        }
        @keyframes startPulse {
            0%,100% { box-shadow: 0 4px 24px rgba(200,16,46,0.5); }
            50%      { box-shadow: 0 6px 36px rgba(255,45,85,0.75); }
        }
        .start-btn:hover { transform: translateY(-2px) scale(1.04); animation: none; box-shadow: 0 8px 32px rgba(255,45,85,0.65); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SCORE REVEAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #score-section { animation: cardIn 0.7s cubic-bezier(.22,1,.36,1) both; }
        .score-circle {
            width: 130px; height: 130px; border-radius: 50%;
            border: 3px solid var(--gold);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            margin: 0 auto 24px;
            box-shadow: 0 0 40px rgba(255,215,0,0.3), inset 0 0 30px rgba(255,215,0,0.06);
            animation: scoreReveal 0.8s cubic-bezier(.22,1,.36,1) both;
        }
        @keyframes scoreReveal {
            from { transform: scale(0.4) rotate(-20deg); opacity: 0; }
            to   { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        .score-number { font-family: 'Playfair Display', serif; font-size: 42px; color: var(--gold); font-weight: 700; line-height: 1; }
        .score-denom  { font-size: 13px; color: rgba(255,215,0,0.6); letter-spacing: 1px; }
        .score-title  { font-family: 'Playfair Display', serif; font-size: 24px; color: var(--white); margin-bottom: 16px; line-height: 1.4; }

        .score-breakdown { display: flex; flex-direction: column; gap: 8px; margin: 16px 0; text-align: left; }
        .score-row {
            display: flex; align-items: center; gap: 10px;
            font-size: 14px; color: var(--text-muted);
            padding: 9px 14px; border-radius: 8px;
            background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06);
        }
        .score-row .s-icon { font-size: 15px; flex-shrink: 0; }
        .score-row.passed { color: #a7f3d0; border-color: rgba(52,211,153,0.2); background: rgba(52,211,153,0.06); }
        .score-row.failed { color: rgba(255,170,170,0.7); }
        .score-row .s-qtext { font-size: 12px; color: inherit; opacity: 0.7; margin-left: auto; max-width: 55%; text-align: right; line-height: 1.3; }

        .divider { width: 60%; height: 1px; background: rgba(255,255,255,0.1); margin: 20px auto; }

        .override-msg {
            font-family: 'Playfair Display', serif;
            font-size: 18px; color: var(--gold); font-style: italic;
            line-height: 1.65; margin: 6px 0;
            text-shadow: 0 0 20px rgba(255,215,0,0.3);
        }
        .override-pct {
            font-family: 'Playfair Display', serif;
            font-size: 52px; color: var(--red-glow); font-weight: 700;
            display: block; margin: 10px 0 4px;
            animation: pulseGlow 1.8s ease-in-out infinite;
        }
        @keyframes pulseGlow {
            0%,100% { text-shadow: 0 0 10px rgba(255,45,85,0.4); }
            50%      { text-shadow: 0 0 30px rgba(255,45,85,0.9), 0 0 60px rgba(255,45,85,0.3); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• VALENTINE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #valentine-section { animation: cardIn 0.7s cubic-bezier(.22,1,.36,1) both; }
        .val-headline { font-family: 'Playfair Display', serif; font-size: 12px; letter-spacing: 2px; text-transform: uppercase; color: var(--text-muted); margin-bottom: 12px; }
        .val-main { font-family: 'Playfair Display', serif; font-size: 22px; color: var(--white); line-height: 1.5; margin-bottom: 4px; }
        .strikethrough { text-decoration: line-through; color: var(--text-muted); }
        .val-forever { font-family: 'Playfair Display', serif; font-size: 28px; color: var(--red-glow); font-weight: 700; display: block; margin-top: 6px; animation: pulseGlow 1.8s ease-in-out infinite; }
        .val-sub { font-size: 15px; color: var(--text-muted); margin: 18px 0 8px; font-style: italic; }
        .button-container { display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 26px; min-height: 90px; position: relative; }
        #yes-btn {
            background: linear-gradient(135deg, #1a7a3a, #25a050); color: white; border: none;
            padding: 18px 48px; border-radius: 12px; cursor: pointer; font-size: 20px;
            font-family: 'Lato', sans-serif; font-weight: 700;
            animation: yesWiggle 1.2s ease-in-out infinite;
            box-shadow: 0 6px 24px rgba(37,160,80,0.4); transition: transform 0.2s, box-shadow 0.2s;
        }
        @keyframes yesWiggle { 0%,100% { transform: rotate(-4deg) scale(1); } 50% { transform: rotate(4deg) scale(1.06); } }
        #yes-btn:hover { animation: none; transform: scale(1.12); box-shadow: 0 10px 32px rgba(37,160,80,0.6); }
        #no-btn {
            position: fixed; background: rgba(80,80,80,0.7); color: #ccc;
            border: 1px solid rgba(255,255,255,0.15); padding: 12px 28px; border-radius: 10px;
            cursor: pointer; font-size: 15px; font-family: 'Lato', sans-serif;
            transition: all 0.1s ease; z-index: 999;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SUCCESS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #success-section { animation: zoomIn 0.7s cubic-bezier(.22,1,.36,1) both; }
        @keyframes zoomIn { from { opacity:0; transform: scale(0.6); } to { opacity:1; transform: scale(1); } }
        .success-emoji { font-size: 38px; margin: 10px 0 18px; animation: bounce 1.2s ease-in-out infinite; }
        @keyframes bounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-16px); } }
        .success-title { font-family: 'Playfair Display', serif; font-size: 32px; color: var(--white); margin-bottom: 12px; }
        .success-sub { font-size: 15px; color: var(--text-muted); font-style: italic; margin-bottom: 22px; line-height: 1.6; }
        video { width: 100%; max-width: 420px; border-radius: 14px; margin-top: 18px; box-shadow: 0 12px 40px rgba(0,0,0,0.6); border: 1px solid var(--card-border); }
        .video-hint { font-size: 13px; color: var(--text-muted); margin-top: 10px; font-style: italic; }

        /* â”€â”€ Couple photos â”€â”€ */
        .couple-row {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 16px;
            margin: 24px 0 6px;
        }
        .couple-frame {
            position: relative;
            flex: 1;
            max-width: 180px;
        }
        .couple-frame img {
            width: 100%;
            aspect-ratio: 3/4;
            object-fit: cover;
            border-radius: 16px;
            border: 2px solid var(--card-border);
            box-shadow: 0 8px 32px rgba(0,0,0,0.6), 0 0 24px rgba(200,16,46,0.2);
            animation: photoReveal 0.8s cubic-bezier(.22,1,.36,1) both;
            display: block;
        }
        .couple-frame:first-child img { animation-delay: 0.15s; }
        .couple-frame:last-child  img { animation-delay: 0.35s; }
        @keyframes photoReveal {
            from { opacity: 0; transform: translateY(20px) scale(0.93); }
            to   { opacity: 1; transform: translateY(0)    scale(1);    }
        }
        .couple-heart {
            position: absolute;
            bottom: -14px; left: 50%;
            transform: translateX(-50%);
            font-size: 26px;
            animation: heartBeat 1.4s ease-in-out infinite;
            filter: drop-shadow(0 2px 8px rgba(255,45,85,0.6));
            z-index: 2;
        }
        .couple-label {
            font-family: 'Playfair Display', serif;
            font-size: 13px; font-style: italic;
            color: var(--text-muted);
            margin-top: 20px;
            letter-spacing: 0.5px;
        }

        /* â”€â”€ Floating characters â”€â”€ */
        .floating-character { position: fixed; width: 160px; height: 160px; object-fit: contain; z-index: 5; pointer-events: none; transition: opacity 0.6s ease; filter: drop-shadow(0 6px 18px rgba(200,16,46,0.35)) brightness(1.15) contrast(1.05); }
        .floating-character.hide { opacity: 0; }
        #toothless-img { animation: wobble 2.5s ease-in-out infinite; }
        #donkey-img    { animation: wobble 2.0s ease-in-out infinite reverse; }
        @keyframes wobble { 0% { transform: rotate(-7deg) scale(1); } 25% { transform: rotate(7deg) scale(1.05); } 50% { transform: rotate(-4deg) scale(1); } 75% { transform: rotate(4deg) scale(1.05); } 100% { transform: rotate(-7deg) scale(1); } }

        /* â”€â”€ Confetti â”€â”€ */
        .confetti-piece { position: fixed; width: 9px; height: 9px; top: -20px; border-radius: 2px; animation: confettiFall 3s linear forwards; z-index: 10; }
        @keyframes confettiFall { to { transform: translateY(110vh) rotate(540deg); opacity: 0; } }

        .hidden { display: none; }

        @media (max-width: 600px) {
            .card { padding: 28px 18px; }
            .q-text { font-size: 16px; }
            .button-container { flex-direction: column; }
            .floating-character { width: 100px; height: 100px; }
            .intro-title { font-size: 21px; }
            .score-row .s-qtext { display: none; }
        }
    </style>
</head>
<body>

<div class="roses-bg" id="roses-bg"></div>
<img id="toothless-img" class="floating-character" src="toothless1.jpg" alt="Toothless">
<img id="donkey-img"    class="floating-character" src="donkey.png"     alt="Donkey">

<div class="card" id="main-card">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INTRO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="intro-section">
        <span class="intro-heart">ğŸ’•</span>
        <h1 class="intro-title">Answer these questions<br>& get a good scoreâ€¦</h1>
        <p class="intro-subtitle">
            Hopefully you pass â€” because there's a very<br>
            important question waiting for you at the end ğŸŒ¹
        </p>
        <div class="intro-note">
            âœ¨ &nbsp;5 questions &nbsp;Â·&nbsp; 3 tries each &nbsp;Â·&nbsp; Score out of 100
        </div>
        <button class="start-btn" onclick="startQuiz()">I'm ready ğŸ’–</button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PUZZLE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="puzzle-section" class="hidden">
        <div class="score-badge" id="live-score">â­ 0 / 100</div>
        <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
        <p class="q-number" id="q-number">Question 1 of 5</p>
        <p class="q-title">ğŸ’ A Little Puzzle ğŸ’</p>
        <p class="q-text" id="q-text"></p>
        <div class="tries-row" id="tries-row"></div>
        <div class="choices" id="choices-container"></div>
        <p class="error-msg" id="error-msg"></p>
        <button class="next-btn" id="next-btn" onclick="nextPuzzle()">Continue âœ¨</button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SCORE REVEAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="score-section" class="hidden">
        <div class="score-circle">
            <span class="score-number" id="final-score-num">0</span>
            <span class="score-denom">/ 100</span>
        </div>
        <h2 class="score-title" id="score-title">Your Score</h2>
        <div class="score-breakdown" id="score-breakdown"></div>
        <div class="divider"></div>
        <p class="override-msg">But honestlyâ€¦ it doesn't even matter.</p>
        <p class="override-msg" style="margin-top:4px;">
            You will always be my <strong style="color:var(--rose-light); font-style:normal;">Chooti Menika</strong> ğŸŒ¸
        </p>
        <span class="override-pct">100% ğŸ’•</span>
        <button class="next-btn" style="margin-top:24px;" onclick="showValentine()">Continue ğŸŒ¹</button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• VALENTINE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="valentine-section" class="hidden">
        <p class="val-headline">The most important question</p>
        <h2 class="val-main">
            Will you be my Valentine
            <span class="strikethrough"> for 2026</span>
        </h2>
        <span class="val-forever">â€¦and forever? ğŸ’•</span>
        <p class="val-sub">This is the one that truly mattersâ€¦ ğŸŒ¹</p>
        <div class="button-container">
            <button id="yes-btn" onclick="showSuccess()">Yes! ğŸ’–</button>
            <button id="no-btn" onmouseover="runAway()" onclick="runAway()">No</button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SUCCESS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="success-section" class="hidden">
        <div class="success-emoji">ğŸ‰ âœ¨ ğŸŠ</div>
        <h2 class="success-title">I knew it! ğŸ’–</h2>
        <p class="success-sub">
            You've made me the happiest person in the world.<br>
            Toothless and Donkey have a special message for youâ€¦
        </p>
        <!-- Couple photos -->
        <div class="couple-row">
            <div class="couple-frame">
                <img src="https://raw.githubusercontent.com/YOUR_USERNAME/YOUR_REPO/main/image1.jpg" alt="Him" onerror="this.style.display='none'">
            </div>
            <div class="couple-frame">
                <img src="https://raw.githubusercontent.com/YOUR_USERNAME/YOUR_REPO/main/image2.jpg" alt="Her" onerror="this.style.display='none'">
                <span class="couple-heart">ğŸ’•</span>
            </div>
        </div>
        <p class="couple-label">Us ğŸŒ¹</p>

        <video id="val-video" controls playsinline style="margin-top:28px;">
            <source src="toothless.mp4" type="video/mp4">
        </video>
        <p class="video-hint" id="video-hint" style="display:none;">â–¶ Tap to play</p>
        <div class="success-emoji" style="margin-top:18px;">ğŸ’• ğŸ’— ğŸ’– ğŸ’ ğŸ’•</div>
    </div>

</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const puzzles = [
    {
        q: "Where did we first meet? ğŸŒ¸",
        choices: ["Diyatha Uyana", "Keku", "Diyasau Uyana"],
        answer: "Keku"
    },
    {
        q: "What incident did God and Harini use to make us meet in life? ğŸ˜‡",
        choices: ["Big Boobs", "Covid 19", "Cyber Incident"],
        answer: "Cyber Incident"
    },
    {
        q: "What do I love most about you? ğŸ’«",
        choices: ["Your Boobs", "Your Personality", "Your Eyes"],
        answer: "Your Eyes"
    },
    {
        q: "Which body part(s) of yours do we talk about the most? ğŸ‘€",
        choices: ["Legs", "Boobs", "Eyes & Boobs"],
        answer: "Eyes & Boobs"
    },
    {
        q: "You + Me = ? ğŸŒ¹",
        choices: ["Have 4 Children", "Build Our Own Kingdom", "Build Our Own Kingdom + Have 4 Children"],
        answer: "Build Our Own Kingdom + Have 4 Children"
    }
];

const MAX_TRIES = 3;
const PTS_EACH  = 20;

let current        = 0;
let selectedChoice = null;
let triesLeft      = MAX_TRIES;
let score          = 0;
let scoreLog       = [];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  FLOW CONTROL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function startQuiz() {
    document.getElementById('intro-section').classList.add('hidden');
    document.getElementById('puzzle-section').classList.remove('hidden');
    renderQuestion();
    updateCharacterVisibility();
}

function showValentine() {
    document.getElementById('score-section').classList.add('hidden');
    document.getElementById('valentine-section').classList.remove('hidden');
    updateCharacterVisibility();
    setTimeout(() => {
        const btn = document.getElementById('no-btn');
        btn.style.left = '50%'; btn.style.top = '50%';
        btn.style.transform = 'translate(-50%, -50%)';
    }, 50);
}

function showSuccess() {
    document.getElementById('valentine-section').classList.add('hidden');
    document.getElementById('success-section').classList.remove('hidden');
    updateCharacterVisibility();
    launchConfetti();
    const video = document.getElementById('val-video');
    if (video) video.play().catch(() => { document.getElementById('video-hint').style.display = 'block'; });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER QUESTION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderQuestion() {
    const p = puzzles[current];
    triesLeft = MAX_TRIES;
    selectedChoice = null;

    document.getElementById('q-number').innerText    = `Question ${current + 1} of ${puzzles.length}`;
    document.getElementById('q-text').innerText      = p.q;
    document.getElementById('next-btn').disabled     = false;
    setError('', '');
    updateProgress();
    updateLiveScore();
    renderPips();

    const shuffled  = [...p.choices].sort(() => Math.random() - 0.5);
    const container = document.getElementById('choices-container');
    container.innerHTML = '';
    shuffled.forEach(choice => {
        const btn       = document.createElement('button');
        btn.className   = 'choice-btn';
        btn.textContent = choice;
        btn.onclick     = () => selectChoice(btn, choice);
        container.appendChild(btn);
    });
}

function renderPips() {
    const row = document.getElementById('tries-row');
    row.innerHTML = '';
    for (let i = 0; i < MAX_TRIES; i++) {
        const pip = document.createElement('div');
        pip.className = 'try-pip';
        row.appendChild(pip);
    }
}

function burnPip() {
    const pip = document.querySelector('.try-pip:not(.used)');
    if (pip) pip.classList.add('used');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SELECTION & SUBMISSION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function selectChoice(btn, choice) {
    document.querySelectorAll('.choice-btn').forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');
    selectedChoice = choice;
    setError('', '');
}

function nextPuzzle() {
    if (!selectedChoice) {
        setError('Please pick an answer ğŸŒ¹', 'red');
        return;
    }

    const correct = puzzles[current].answer;

    if (selectedChoice.toLowerCase() === correct.toLowerCase()) {
        // âœ… CORRECT
        score += PTS_EACH;
        scoreLog.push({ q: puzzles[current].q, passed: true, tries: MAX_TRIES - triesLeft + 1 });
        setError('', '');
        flashCardGreen();
        setTimeout(advanceQuestion, 300);

    } else {
        // âŒ WRONG
        triesLeft--;
        burnPip();

        const selBtn = document.querySelector('.choice-btn.selected');
        if (selBtn) {
            selBtn.classList.add('wrong');
            setTimeout(() => selBtn.classList.remove('wrong', 'selected'), 600);
        }
        selectedChoice = null;
        shakeCard();

        if (triesLeft > 0) {
            setError(`Not quiteâ€¦ ${triesLeft} tr${triesLeft === 1 ? 'y' : 'ies'} left ğŸŒ¹`, 'red');
        } else {
            // Out of tries
            setError("No more tries! Here's the answerâ€¦ ğŸ’«", 'gold');
            scoreLog.push({ q: puzzles[current].q, passed: false, tries: MAX_TRIES });
            disableChoices();
            revealCorrectAnswer(correct);
            document.getElementById('next-btn').disabled = true;
            setTimeout(() => {
                setError('', '');
                flashCardGreen();
                setTimeout(advanceQuestion, 300);
            }, 2200);
        }
    }
}

function advanceQuestion() {
    current++;
    if (current < puzzles.length) {
        fadeCard(renderQuestion);
    } else {
        document.getElementById('progress').style.width = '100%';
        document.getElementById('puzzle-section').classList.add('hidden');
        showScoreSection();
        updateCharacterVisibility();
    }
}

function revealCorrectAnswer(correct) {
    document.querySelectorAll('.choice-btn').forEach(b => {
        if (b.textContent.toLowerCase() === correct.toLowerCase()) b.classList.add('correct-reveal');
    });
}

function disableChoices() {
    document.querySelectorAll('.choice-btn').forEach(b => { b.disabled = true; });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SCORE SECTION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showScoreSection() {
    document.getElementById('score-section').classList.remove('hidden');

    // Count-up animation
    const display = document.getElementById('final-score-num');
    let count = 0;
    const step = Math.max(1, Math.ceil(score / 40));
    const ticker = setInterval(() => {
        count = Math.min(count + step, score);
        display.textContent = count;
        if (count >= score) clearInterval(ticker);
    }, 30);

    // Title
    const title = document.getElementById('score-title');
    if      (score === 100) title.textContent = 'Perfect Score! ğŸŒŸ';
    else if (score >= 80)   title.textContent = 'So close! ğŸ’«';
    else if (score >= 60)   title.textContent = 'Not bad! ğŸ’•';
    else if (score >= 40)   title.textContent = 'You tried! ğŸŒ¹';
    else                    title.textContent = 'Awwâ€¦ ğŸŒ¹';

    // Breakdown rows
    const bd = document.getElementById('score-breakdown');
    bd.innerHTML = '';
    const shortQ = [
        "First meet ğŸŒ¸",
        "The incident ğŸ˜‡",
        "What I love ğŸ’«",
        "Body part talk ğŸ‘€",
        "You + Me ğŸŒ¹"
    ];
    scoreLog.forEach((entry, i) => {
        const row     = document.createElement('div');
        row.className = 'score-row ' + (entry.passed ? 'passed' : 'failed');
        const icon    = entry.passed ? 'âœ…' : 'âŒ';
        const label   = entry.passed
            ? (entry.tries === 1 ? 'First try! âœ¨' : `Got it in ${entry.tries} tries`)
            : 'Ran out of tries';
        row.innerHTML = `<span class="s-icon">${icon}</span><span>${label}</span><span class="s-qtext">${shortQ[i] || ''}</span>`;
        bd.appendChild(row);
    });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  NO BUTTON
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function runAway() {
    const btn  = document.getElementById('no-btn');
    const maxX = window.innerWidth  - (btn.offsetWidth  || 100) - 20;
    const maxY = window.innerHeight - (btn.offsetHeight || 48)  - 20;
    btn.style.left      = Math.max(10, Math.random() * maxX) + 'px';
    btn.style.top       = Math.max(10, Math.random() * maxY) + 'px';
    btn.style.transform = 'none';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CONFETTI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function launchConfetti() {
    const colors = ['#c8102e','#ff2d55','#ffd700','#fff','#ff6b8a'];
    for (let i = 0; i < 70; i++) {
        setTimeout(() => {
            const c = document.createElement('div');
            c.className               = 'confetti-piece';
            c.style.left              = Math.random() * 100 + '%';
            c.style.background        = colors[Math.floor(Math.random() * colors.length)];
            c.style.animationDelay    = Math.random() * 1.5 + 's';
            c.style.animationDuration = (Math.random() * 1.5 + 2) + 's';
            document.body.appendChild(c);
            setTimeout(() => c.remove(), 4500);
        }, i * 22);
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateProgress() {
    document.getElementById('progress').style.width = (current / puzzles.length * 100) + '%';
}

function updateLiveScore() {
    document.getElementById('live-score').textContent = `â­ ${score} / 100`;
}

function setError(msg, cls) {
    const el = document.getElementById('error-msg');
    el.textContent = msg;
    el.className   = 'error-msg ' + (cls || '');
    if (msg) el.classList.add('show');
}

function fadeCard(cb) {
    const card = document.getElementById('main-card');
    card.style.opacity   = '0.5';
    card.style.transform = 'scale(0.97)';
    setTimeout(() => { cb(); card.style.opacity = '1'; card.style.transform = 'scale(1)'; }, 240);
}

function flashCardGreen() {
    const card = document.getElementById('main-card');
    card.style.boxShadow = '0 0 60px rgba(37,160,80,0.45), 0 24px 80px rgba(0,0,0,0.7)';
    setTimeout(() => { card.style.boxShadow = ''; }, 500);
}

function shakeCard() {
    const card = document.getElementById('main-card');
    card.style.animation = 'none';
    void card.offsetWidth;
    card.style.animation = 'shake 0.45s ease';
    setTimeout(() => { card.style.animation = ''; }, 500);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ROSES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function createRose() {
    const bg   = document.getElementById('roses-bg');
    const rose = document.createElement('div');
    rose.className = 'rose';
    const types  = ['ğŸŒ¹','ğŸŒ¹','ğŸŒ¹','ğŸ¤','ğŸŒ¸','ğŸŒº'];
    rose.innerHTML            = types[Math.floor(Math.random() * types.length)];
    rose.style.left           = Math.random() * 100 + '%';
    rose.style.animationDuration = (Math.random() * 5 + 9) + 's';
    rose.style.animationDelay    = Math.random() * 4 + 's';
    rose.style.fontSize          = (Math.random() * 14 + 16) + 'px';
    bg.appendChild(rose);
    setTimeout(() => rose.remove(), 14000);
}
setInterval(createRose, 600);
for (let i = 0; i < 14; i++) setTimeout(createRose, i * 200);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  FLOATING CHARACTERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const chars = [
    { el: document.getElementById('toothless-img'), vx: 1.9,  vy: 1.5 },
    { el: document.getElementById('donkey-img'),    vx: -2.2, vy: 1.8 }
];
chars[0].el.style.left = '30px';
chars[0].el.style.top  = '30px';
chars[1].el.style.left = (window.innerWidth - 190) + 'px';
chars[1].el.style.top  = (window.innerHeight - 190) + 'px';

function animateChars() {
    chars.forEach(c => {
        let x = parseFloat(c.el.style.left) || 30;
        let y = parseFloat(c.el.style.top)  || 30;
        const w = c.el.offsetWidth  || 160;
        const h = c.el.offsetHeight || 160;
        x += c.vx; y += c.vy;
        if (x <= 0 || x >= window.innerWidth  - w) { c.vx *= -1; x = Math.max(0, Math.min(x, window.innerWidth  - w)); }
        if (y <= 0 || y >= window.innerHeight - h) { c.vy *= -1; y = Math.max(0, Math.min(y, window.innerHeight - h)); }
        c.el.style.left = x + 'px';
        c.el.style.top  = y + 'px';
    });
    requestAnimationFrame(animateChars);
}
animateChars();

function updateCharacterVisibility() {
    const isSuccess = !document.getElementById('success-section').classList.contains('hidden');
    const isIntro   = !document.getElementById('intro-section').classList.contains('hidden');
    chars.forEach(c => c.el.classList.toggle('hide', isSuccess || isIntro));
}

updateCharacterVisibility();
</script>
</body>
</html>
